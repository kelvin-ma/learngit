<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.csj.gold.dao.MobileShopMapper" >
  <resultMap id="MobileShop" type="com.csj.gold.model.bean.MobileShop" >
    <result column="id" property="id" jdbcType="BIGINT" />
    <result column="shop_name" property="shopName" jdbcType="VARCHAR" />
    <result column="shop_address" property="shopAddress" jdbcType="VARCHAR" />
    <result column="shop_coordinate_east" property="shopCoordinateEast" jdbcType="DOUBLE" />
    <result column="shop_coordinate_north" property="shopCoordinateNorth" jdbcType="DOUBLE" />
    <result column="shop_image_path" property="shopImagePath" jdbcType="VARCHAR" />
    <result column="shop_phone" property="shopPhone" jdbcType="VARCHAR" />
    <result column="shop_type" property="shopType" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Table_sys_shop">
  	 sys_shop ss
  </sql>
  <sql id="Table_sys_file">
  	 sys_file sf
  </sql>
  <sql id="MobileShop_Column_List">
  	ss.shop_name,
	ss.shop_coordinate_east,
	ss.shop_address,
	ss.shop_coordinate_north,
	ss.shop_phone,
	ss.shop_type,
	ss.id,
	sf.file_path as shop_image_path
  </sql>
  <select id="searchAll" resultMap="MobileShop" parameterType="java.lang.Long" >
    select 
	    <include refid="MobileShop_Column_List" />
 	from 
 			<include refid="Table_sys_shop" />
		LEFT JOIN 
			<include refid="Table_sys_file" />
			ON ss.shop_image_id = sf.id and sf.is_del = 0 and sf.is_forbidden = 0
	where
		ss.is_del = 0
		and ss.is_forbidden = 0
  </select>
  
  <select id="searchAllSaveShop" resultMap="MobileShop" parameterType="java.lang.Long" >
    select 
	    <include refid="MobileShop_Column_List" />
 	from 
 			<include refid="Table_sys_shop" />
		LEFT JOIN 
			<include refid="Table_sys_file" />
			ON ss.shop_image_id = sf.id and sf.is_del = 0 and sf.is_forbidden = 0
	where
		ss.is_del = 0
		and ss.is_forbidden = 0
		ans ss.can_pick = 1
  </select>
  
  <select id="searchAllPickShop" resultMap="MobileShop" parameterType="java.lang.Long" >
    select 
	    <include refid="MobileShop_Column_List" />
 	from 
 			<include refid="Table_sys_shop" />
		LEFT JOIN 
			<include refid="Table_sys_file" />
			ON ss.shop_image_id = sf.id and sf.is_del = 0 and sf.is_forbidden = 0
	where
		ss.is_del = 0
		and ss.is_forbidden = 0
		and ss.can_save = 1
  </select>
</mapper>